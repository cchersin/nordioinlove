<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{fragments/layout :: layout (~{::body},'index')}">

<body>

  <div class="container">
    <div th:each="student : ${students}">
      <span th:text="${student.id}"/>
      <span th:text="${student.name}"/>
      <span th:text="${student.schoolClass}"/>
      <span th:text="${student.gender}"/>
      <span th:text="${student.genderPreference}"/>
      <span th:text="${student.preferences}"/>
    </div>
  </div>

  <button id="reset">RESET</button>
  
<script>
    document.getElementById('reset').addEventListener('click', () => {
      event.preventDefault();
      event.stopPropagation();
      if(confirm("Reset db?")){
        var xhr = new XMLHttpRequest();
        xhr.open("POST", '/admin/reset', true);

        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

        xhr.onreadystatechange = function() { // Call a function when the state changes.
          if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
            alert('Done');
          }
        }
        xhr.send("");
      }
    });
</script>
</body>
</html>
